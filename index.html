<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Men’s Fellowship Management System</title>

  <!-- CSS -->
  <link href="css/style.css" rel="stylesheet" />

  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json"/>
  <meta name="theme-color" content="#007bff"/>

  <style>
    #installBtn {
      display: none;
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 12px 18px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      font-size: 16px;
      z-index: 1000;
    }
    #installBtn:hover { background: #0056b3; }
  </style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>⛪ Men’s Fellowship Management System</h1>
  </div>

  <!-- Navigation Tabs -->
  <div class="nav-tabs">
    <button class="nav-tab active" onclick="showTab('dashboard')">📊 Dashboard</button>
    <button class="nav-tab" onclick="showTab('groups')">👥 Groups</button>
    <button class="nav-tab" onclick="showTab('attendance')">📋 Attendance</button>
    <button class="nav-tab" onclick="showTab('announcements')">📢 Announcements</button>
    <button class="nav-tab" onclick="showTab('events')">📅 Events</button>
    <button class="nav-tab" onclick="showTab('contributions')">💰 Contributions</button>
  </div>

  <!-- Dashboard -->
  <div id="dashboard" class="tab-content active">
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-number" id="totalGroups">0</div>
        <div class="stat-label">Total Groups</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="totalMembers">0</div>
        <div class="stat-label">Total Members</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="totalContributions">0</div>
        <div class="stat-label">Total Contributions (KSH)</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="upcomingEvents">0</div>
        <div class="stat-label">Upcoming Events</div>
      </div>
    </div>
  </div>

  <!-- Groups -->
  <div id="groups" class="tab-content">
    <div class="section-header">
      <h2 class="section-title">Church Groups</h2>
      <button class="btn btn-primary" onclick="showAddGroupModal()">➕ Add Group</button>
    </div>
    <div id="groupsList" class="dashboard-grid"></div>
  </div>

  <!-- Attendance -->
  <div id="attendance" class="tab-content">
    <div class="section-header">
      <h2 class="section-title">Attendance Tracking</h2>
      <button class="btn btn-primary" onclick="showAttendanceModal()">📝 Mark Attendance</button>
    </div>
    <div class="content-card">
      <label for="attendanceGroupSelect">Select Group</label>
      <select id="attendanceGroupSelect"></select>
      <div id="attendanceMembersList" style="margin-top:10px;"></div>
    </div>
  </div>

  <!-- Contributions -->
  <div id="contributions" class="tab-content">
    <div class="section-header">
      <h2 class="section-title">Contributions & Giving</h2>
      <button class="btn btn-primary" onclick="showContributionModal()">💰 Record Contribution</button>
    </div>
    <div id="contributionsList" class="content-card"></div>
  </div>

  <!-- Announcements -->
  <div id="announcements" class="tab-content">
    <div class="section-header">
      <h2 class="section-title">Announcements</h2>
      <button class="btn btn-primary" onclick="showAnnouncementModal()">📢 Add Announcement</button>
    </div>
    <div id="announcementsList" class="content-card"></div>
  </div>

  <!-- Events -->
  <div id="events" class="tab-content">
    <div class="section-header">
      <h2 class="section-title">Events & Reminders</h2>
      <button class="btn btn-primary" onclick="showEventModal()">📅 Add Event</button>
    </div>
    <div id="eventsList" class="content-card"></div>
  </div>

  <!-- Modals -->

  <!-- Add Group Modal -->
  <div id="addGroupModal" class="modal">
    <div class="modal-content">
      <h2>➕ New Group</h2>
      <form id="addGroupForm">
        <div class="form-group">
          <label for="groupName">Group Name</label>
          <input type="text" id="groupName" required />
        </div>
        <div class="form-group">
          <label for="groupLeader">Leader Name</label>
          <input type="text" id="groupLeader" />
        </div>
        <div class="form-group">
          <label for="leaderPhone">Leader Phone</label>
          <input type="text" id="leaderPhone" />
        </div>
        <button type="submit" class="btn btn-primary">Save</button>
        <button type="button" class="btn btn-secondary" onclick="closeModal('addGroupModal')">Cancel</button>
      </form>
    </div>
  </div>

  <!-- Add Member Modal -->
  <div id="addMemberModal" class="modal">
    <div class="modal-content">
      <h2>➕ Add Member</h2>
      <form id="addMemberForm">
        <div class="form-group">
          <label for="memberName">Member Name</label>
          <input type="text" id="memberName" required />
        </div>
        <div class="form-group">
          <label for="memberPhone">Phone</label>
          <input type="text" id="memberPhone" />
        </div>
        <button type="submit" class="btn btn-primary">Save</button>
        <button type="button" class="btn btn-secondary" onclick="closeModal('addMemberModal')">Cancel</button>
      </form>
    </div>
  </div>

  <!-- Attendance Modal -->
<div id="attendanceModal" class="modal">
  <div class="modal-content">
    <h2>📝 Mark Attendance</h2>
    <form id="attendanceForm">
      <!-- Group Selection -->
      <div class="form-group">
        <label for="attendanceGroupModel">Select Group</label>
        <select id="attendanceGroupModel">
          <option value="">-- Loading groups... --</option>
        </select>
      </div>

      <!-- Members Checkboxes -->
      <div id="attendanceMembersModel" class="form-group">
        <!-- Checkboxes for members will be inserted here dynamically -->
      </div>

      <!-- Submit -->
      <button type="submit" class="btn btn-primary">Save</button>
      <button type="button" class="btn btn-secondary" onclick="closeModal('attendanceModal')">Cancel</button>
    </form>
  </div>
</div>


  <!-- Contribution Modal -->
<div id="contributionModal" class="modal">
  <div class="modal-content">
    <h2>💰 Record Contribution</h2>
    <form id="contributionForm">
      <!-- Group Selection -->
      <div class="form-group">
        <label for="memberGroup">Group</label>
        <select id="memberGroup"></select>
      </div>

      <!-- Member Selection -->
      <div class="form-group">
        <label for="contributionMember">Member</label>
        <select id="contributionMember"></select>
      </div>

      <!-- Contribution Type -->
      <div class="form-group">
        <label for="contributionType">Type</label>
        <select id="contributionType" required>
          <option value="">-- Select Type --</option>
          <option value="Tithes">Tithes</option>
          <option value="Offering">Offering</option>
          <option value="Donation">Donation</option>
          <option value="Other">Other</option>
        </select>
      </div>

      <!-- Amount -->
      <div class="form-group">
        <label for="contributionAmount">Amount (KSH)</label>
        <input type="number" id="contributionAmount" required />
      </div>

      <!-- Buttons -->
      <button type="submit" class="btn btn-primary">Save</button>
      <button type="button" class="btn btn-secondary" onclick="closeModal('contributionModal')">Cancel</button>
    </form>
  </div>
</div>

  <!-- Announcement Modal -->
<div id="announcementModal" class="modal">
  <div class="modal-content">
    <h2>📢 New Announcement</h2>
    <form id="announcementForm">
      <div class="form-group">
        <label for="announcementTitle">Title</label>
        <input type="text" id="announcementTitle" required />
      </div>
      <div class="form-group">
        <label for="announcementMessage">Message</label>
        <textarea id="announcementMessage" required></textarea>
      </div>
      <div class="form-group">
        <label for="announcementDate">Date</label>
        <input type="date" id="announcementDate" required />
      </div>
      <button type="submit" class="btn btn-primary">Save</button>
      <button type="button" class="btn btn-secondary" onclick="closeModal('announcementModal')">Cancel</button>
    </form>
  </div>
</div>


  <!-- Event Modal -->
  <div id="eventModal" class="modal">
    <div class="modal-content">
      <h2>📅 New Event</h2>
      <form id="eventForm">
        <div class="form-group">
          <label for="eventTitle">Title</label>
          <input type="text" id="eventTitle" required />
        </div>
        <div class="form-group">
          <label for="eventDate">Date</label>
          <input type="date" id="eventDate" required />
        </div>
        <button type="submit" class="btn btn-primary">Save</button>
        <button type="button" class="btn btn-secondary" onclick="closeModal('eventModal')">Cancel</button>
      </form>
    </div>
  </div>

<!-- JavaScript -->
<script type="module" src="./app.js"></script>
</body>
</html>
